{"ast":null,"code":"import axios from 'axios';\nimport { LOGIN_SUCCESS, LOGIN_FAIL, LOAD_USER_SUCCESS, LOAD_USER_FAIL } from './types';\nexport const login = (email, password) => async dispatch => {\n  const config = {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n  const body = JSON.stringify({\n    email,\n    password\n  });\n  try {\n    const res = await axios.post('http://localhost:8000/auth/jwt/create/', body, config);\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: res.data\n    });\n    dispatch(load_user());\n  } catch (err) {\n    dispatch({\n      type: LOGIN_FAIL\n    });\n  }\n};\nexport const load_user = () => async dispatch => {\n  if (localStorage.getItem('access')) {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        'WWW-Authenticate': `JWT ${localStorage.getItem('access')}`,\n        'Accept': 'application/json'\n      }\n    };\n    try {\n      const res = await axios.get('http://localhost:8000/auth/users/me/', config);\n      dispatch({\n        type: LOAD_USER_SUCCESS,\n        payload: res.data\n      });\n    } catch (err) {\n      dispatch({\n        type: LOAD_USER_FAIL\n      });\n    }\n  } else {\n    dispatch({\n      type: LOAD_USER_FAIL\n    });\n  }\n};","map":{"version":3,"names":["axios","LOGIN_SUCCESS","LOGIN_FAIL","LOAD_USER_SUCCESS","LOAD_USER_FAIL","login","email","password","dispatch","config","headers","body","JSON","stringify","res","post","type","payload","data","load_user","err","localStorage","getItem","get"],"sources":["D:/Project/StudentPerformanceReport/reactfrontend/src/Actions/auth.js"],"sourcesContent":["import axios from 'axios'\r\n\r\nimport {\r\n    LOGIN_SUCCESS,\r\n    LOGIN_FAIL,\r\n    LOAD_USER_SUCCESS,\r\n    LOAD_USER_FAIL\r\n} from './types';\r\n\r\nexport const login = (email,password) => async dispatch =>{\r\n\r\n    const config = {\r\n        headers:{\r\n            'Content-Type' : 'application/json'\r\n        }\r\n    }\r\n    const body = JSON.stringify({email,password})\r\n\r\n    try{\r\n        const res = await axios.post('http://localhost:8000/auth/jwt/create/',body,config)\r\n        dispatch({\r\n            type:LOGIN_SUCCESS,\r\n            payload:res.data\r\n        })\r\n\r\n        dispatch(load_user())\r\n    } catch(err){\r\n        dispatch({\r\n            type:LOGIN_FAIL\r\n        })\r\n    }\r\n\r\n};\r\nexport const load_user = () => async dispatch =>{\r\n    if(localStorage.getItem('access')){\r\n        const config = {\r\n            headers:{\r\n                'Content-Type' : 'application/json',\r\n                'WWW-Authenticate': `JWT ${localStorage.getItem('access')}`,\r\n                'Accept':'application/json'\r\n            }\r\n        }\r\n        try{\r\n            const res = await axios.get('http://localhost:8000/auth/users/me/',config)\r\n            dispatch({\r\n                type:LOAD_USER_SUCCESS,\r\n                payload:res.data\r\n            })\r\n        } catch(err){\r\n            dispatch({\r\n                type:LOAD_USER_FAIL\r\n            })\r\n        }\r\n    }else{\r\n        dispatch({\r\n            type:LOAD_USER_FAIL\r\n        })\r\n    }\r\n    \r\n\r\n};\r\n\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,SACIC,aAAa,EACbC,UAAU,EACVC,iBAAiB,EACjBC,cAAc,QACX,SAAS;AAEhB,OAAO,MAAMC,KAAK,GAAGA,CAACC,KAAK,EAACC,QAAQ,KAAK,MAAMC,QAAQ,IAAG;EAEtD,MAAMC,MAAM,GAAG;IACXC,OAAO,EAAC;MACJ,cAAc,EAAG;IACrB;EACJ,CAAC;EACD,MAAMC,IAAI,GAAGC,IAAI,CAACC,SAAS,CAAC;IAACP,KAAK;IAACC;EAAQ,CAAC,CAAC;EAE7C,IAAG;IACC,MAAMO,GAAG,GAAG,MAAMd,KAAK,CAACe,IAAI,CAAC,wCAAwC,EAACJ,IAAI,EAACF,MAAM,CAAC;IAClFD,QAAQ,CAAC;MACLQ,IAAI,EAACf,aAAa;MAClBgB,OAAO,EAACH,GAAG,CAACI;IAChB,CAAC,CAAC;IAEFV,QAAQ,CAACW,SAAS,CAAC,CAAC,CAAC;EACzB,CAAC,CAAC,OAAMC,GAAG,EAAC;IACRZ,QAAQ,CAAC;MACLQ,IAAI,EAACd;IACT,CAAC,CAAC;EACN;AAEJ,CAAC;AACD,OAAO,MAAMiB,SAAS,GAAGA,CAAA,KAAM,MAAMX,QAAQ,IAAG;EAC5C,IAAGa,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,EAAC;IAC9B,MAAMb,MAAM,GAAG;MACXC,OAAO,EAAC;QACJ,cAAc,EAAG,kBAAkB;QACnC,kBAAkB,EAAG,OAAMW,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAE,EAAC;QAC3D,QAAQ,EAAC;MACb;IACJ,CAAC;IACD,IAAG;MACC,MAAMR,GAAG,GAAG,MAAMd,KAAK,CAACuB,GAAG,CAAC,sCAAsC,EAACd,MAAM,CAAC;MAC1ED,QAAQ,CAAC;QACLQ,IAAI,EAACb,iBAAiB;QACtBc,OAAO,EAACH,GAAG,CAACI;MAChB,CAAC,CAAC;IACN,CAAC,CAAC,OAAME,GAAG,EAAC;MACRZ,QAAQ,CAAC;QACLQ,IAAI,EAACZ;MACT,CAAC,CAAC;IACN;EACJ,CAAC,MAAI;IACDI,QAAQ,CAAC;MACLQ,IAAI,EAACZ;IACT,CAAC,CAAC;EACN;AAGJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}