{"ast":null,"code":"import axios from 'axios';\nimport { LOGIN_SUCCESS, LOGIN_FAIL, LOAD_USER_SUCCESS, LOAD_USER_FAIL } from './types';\nexport const load_user = () => async dispatch => {\n  if (localStorage.getItem('access')) {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `JWT ${localStorage.getItem('access')}`,\n        'Accept': 'application/json'\n      }\n    };\n    try {\n      const res = await axios.get('http://localhost:8000/auth/users/me/', config);\n      dispatch({\n        type: LOAD_USER_SUCCESS,\n        payload: res.data\n      });\n    } catch (err) {\n      dispatch({\n        type: LOAD_USER_FAIL\n      });\n    }\n  } else {\n    dispatch({\n      type: LOAD_USER_FAIL\n    });\n  }\n};\nexport const login = (email, password) => async dispatch => {\n  const config = {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n  const body = JSON.stringify({\n    email,\n    password\n  });\n  try {\n    const res = await axios.post('http://localhost:8000/auth/jwt/create/', body, config);\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: res.data\n    });\n    dispatch(load_user());\n  } catch (err) {\n    dispatch({\n      type: LOGIN_FAIL\n    });\n  }\n};","map":{"version":3,"names":["axios","LOGIN_SUCCESS","LOGIN_FAIL","LOAD_USER_SUCCESS","LOAD_USER_FAIL","load_user","dispatch","localStorage","getItem","config","headers","res","get","type","payload","data","err","login","email","password","body","JSON","stringify","post"],"sources":["D:/Project/StudentPerformanceReport/reactfrontend/src/Actions/auth.js"],"sourcesContent":["import axios from 'axios'\r\n\r\nimport {\r\n    LOGIN_SUCCESS,\r\n    LOGIN_FAIL,\r\n    LOAD_USER_SUCCESS,\r\n    LOAD_USER_FAIL\r\n} from './types';\r\n\r\nexport const load_user = () => async dispatch =>{\r\n    if(localStorage.getItem('access')){\r\n        const config = {\r\n            headers:{\r\n                'Content-Type' : 'application/json',\r\n                'Authorization': `JWT ${localStorage.getItem('access')}`,\r\n                'Accept':'application/json'\r\n            }\r\n        }\r\n        try{\r\n            const res = await axios.get('http://localhost:8000/auth/users/me/',config)\r\n            dispatch({\r\n                type:LOAD_USER_SUCCESS,\r\n                payload:res.data\r\n            })\r\n        } catch(err){\r\n            dispatch({\r\n                type:LOAD_USER_FAIL\r\n            })\r\n        }\r\n    }else{\r\n        dispatch({\r\n            type:LOAD_USER_FAIL\r\n        })\r\n    }\r\n    \r\n\r\n};\r\n\r\n\r\nexport const login = (email,password) => async dispatch =>{\r\n\r\n    const config = {\r\n        headers:{\r\n            'Content-Type' : 'application/json'\r\n        }\r\n    }\r\n    const body = JSON.stringify({email,password})\r\n\r\n    try{\r\n        const res = await axios.post('http://localhost:8000/auth/jwt/create/',body,config)\r\n        dispatch({\r\n            type:LOGIN_SUCCESS,\r\n            payload:res.data\r\n        })\r\n\r\n        dispatch(load_user())\r\n    } catch(err){\r\n        dispatch({\r\n            type:LOGIN_FAIL\r\n        })\r\n    }\r\n\r\n};\r\n\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,SACIC,aAAa,EACbC,UAAU,EACVC,iBAAiB,EACjBC,cAAc,QACX,SAAS;AAEhB,OAAO,MAAMC,SAAS,GAAGA,CAAA,KAAM,MAAMC,QAAQ,IAAG;EAC5C,IAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,EAAC;IAC9B,MAAMC,MAAM,GAAG;MACXC,OAAO,EAAC;QACJ,cAAc,EAAG,kBAAkB;QACnC,eAAe,EAAG,OAAMH,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAE,EAAC;QACxD,QAAQ,EAAC;MACb;IACJ,CAAC;IACD,IAAG;MACC,MAAMG,GAAG,GAAG,MAAMX,KAAK,CAACY,GAAG,CAAC,sCAAsC,EAACH,MAAM,CAAC;MAC1EH,QAAQ,CAAC;QACLO,IAAI,EAACV,iBAAiB;QACtBW,OAAO,EAACH,GAAG,CAACI;MAChB,CAAC,CAAC;IACN,CAAC,CAAC,OAAMC,GAAG,EAAC;MACRV,QAAQ,CAAC;QACLO,IAAI,EAACT;MACT,CAAC,CAAC;IACN;EACJ,CAAC,MAAI;IACDE,QAAQ,CAAC;MACLO,IAAI,EAACT;IACT,CAAC,CAAC;EACN;AAGJ,CAAC;AAGD,OAAO,MAAMa,KAAK,GAAGA,CAACC,KAAK,EAACC,QAAQ,KAAK,MAAMb,QAAQ,IAAG;EAEtD,MAAMG,MAAM,GAAG;IACXC,OAAO,EAAC;MACJ,cAAc,EAAG;IACrB;EACJ,CAAC;EACD,MAAMU,IAAI,GAAGC,IAAI,CAACC,SAAS,CAAC;IAACJ,KAAK;IAACC;EAAQ,CAAC,CAAC;EAE7C,IAAG;IACC,MAAMR,GAAG,GAAG,MAAMX,KAAK,CAACuB,IAAI,CAAC,wCAAwC,EAACH,IAAI,EAACX,MAAM,CAAC;IAClFH,QAAQ,CAAC;MACLO,IAAI,EAACZ,aAAa;MAClBa,OAAO,EAACH,GAAG,CAACI;IAChB,CAAC,CAAC;IAEFT,QAAQ,CAACD,SAAS,CAAC,CAAC,CAAC;EACzB,CAAC,CAAC,OAAMW,GAAG,EAAC;IACRV,QAAQ,CAAC;MACLO,IAAI,EAACX;IACT,CAAC,CAAC;EACN;AAEJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}